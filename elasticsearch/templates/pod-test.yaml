apiVersion: v1
kind: Pod
metadata:
  name: {{ .Values.name }}-pod-test
  labels:
    pod: {{ .Values.name }}
spec:
  restartPolicy: {{ .Values.container.restartPolicy }}
  containers:
  - name: {{ .Values.name }}
    image: {{ .Values.image.repository }}:{{ .Values.image.tag }}
    imagePullPolicy: {{ .Values.image.pullPolicy }}



    # resources:
    #   requests:
    #     memory: {{ .Values.resources.requests.memory }}
    #     cpu: {{ .Values.resources.requests.cpu }}
    #   limits:
    #     memory: {{ .Values.resources.limits.memory }}
    #     cpu: {{ .Values.resources.limits.cpu }}

    envFrom:
    - configMapRef:
        name: {{ .Values.name }}-config-env

    volumeMounts:
    - mountPath: /usr/share/elasticsearch/data
      name: {{ .Values.name }}-gluster-volume

  nodeSelector:
    name-node: {{ .Values.nodeSelector.nameNode }}

  volumes:
    - name: {{ .Values.name }}-gluster-volume
    #   hostPath:
    #     path: /volume/elastic
    #     type: Directory
      glusterfs:
        endpoints: {{ .Values.name }}-endpoint
        path: volume1 
        readOnly: no